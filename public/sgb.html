<!DOCTYPE html>

<html lang="pt-BR">

<head>

  <meta charset="UTF-8" />

  <title>SISTEMA DE GESTÃO BRABO v5.0</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />



  <script src="https://cdn.tailwindcss.com"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app-compat.js"></script>

  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-auth-compat.js"></script>

  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore-compat.js"></script>

  <!-- ✅ NOVO (para anexos online no Storage, sem quebrar o que já existe) -->

  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-storage-compat.js"></script>



  <style>

    body { background-color:#1a202c; color:#e2e8f0; font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif; }

    .tab-active { background-color:#4299e1; color:white; }

    .tab-inactive { background-color:#2d3748; color:#e2e8f0; }

    .tab-inactive:hover { background-color:#4a5568; }



    /* Topbar */

    .topbar-blur { backdrop-filter: blur(10px); }



    /* Print */

    @media print {

      .no-print { display:none !important; }

      body { background:#fff !important; color:#111 !important; }

      #app { max-width: 100% !important; margin: 0 !important; padding: 0 !important; }

      .print-page { padding: 18px !important; }

      .print-card { border: 1px solid #ddd !important; border-radius: 8px !important; padding: 12px !important; margin-bottom: 12px !important; }

      .print-muted { color:#555 !important; font-size: 12px !important; }

    }

  </style>

</head>



<body class="min-h-screen">



  <!-- LOGIN (ANTES DE LOGAR) -->

  <div id="login-screen" class="min-h-screen flex items-center justify-center p-4">

    <div class="bg-[#0f172a] border border-gray-700 p-8 rounded-2xl max-w-lg w-full shadow-2xl text-center">

      <h1 class="text-2xl sm:text-3xl font-extrabold text-white mb-2">SISTEMA DE GESTÃO BRABO v5.0</h1>

      <p class="text-sm text-gray-300 mb-6">

        Entre para acessar o sistema. (Somente e-mails autorizados.)

      </p>



      <div id="login-actions" class="space-y-3">

        <button id="btn-login-google"

          class="w-full py-4 rounded-xl bg-[#2563eb] hover:bg-[#1d4ed8] text-white font-extrabold text-lg shadow">

          Entrar com Google

        </button>



        <button id="btn-login-continue"

          class="w-full py-4 rounded-xl bg-[#334155] hover:bg-[#475569] text-white font-extrabold text-lg shadow hidden">

          Continuar

        </button>



        <p class="text-xs text-gray-400">

          Dica: se você já entra pelo /dashboard e ele passa <b>userEmail</b>, o botão “Continuar” aparece automaticamente.

        </p>

      </div>



      <p id="login-error" class="text-sm text-red-300 mt-4 hidden"></p>

    </div>

  </div>



  <!-- APP -->

  <div id="app" class="hidden">



    <!-- ✅ TOPBAR ÚNICO (remove duplicidade de Logado/Sair dentro do app) -->

    <header class="no-print sticky top-0 z-40 border-b border-gray-700 bg-[#0b1220]/90 topbar-blur">

      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex flex-wrap items-center justify-between gap-3">

        <div class="flex items-center gap-3">

          <div class="w-9 h-9 rounded-xl bg-[#111827] border border-gray-700 flex items-center justify-center font-black text-white">

            SGB

          </div>

          <div>

            <div class="text-white font-extrabold leading-tight">SISTEMA DE GESTÃO BRABO</div>

            <div class="text-xs text-gray-400 leading-tight">v5.0</div>

          </div>

        </div>



        <div class="flex flex-wrap items-center gap-3">

          <div class="flex items-center gap-2">

            <span class="text-xs text-gray-400">Unidade:</span>

            <select id="unit-selector" class="bg-[#111827] border border-gray-700 text-white text-sm rounded-lg p-2"></select>

          </div>



          <div class="hidden sm:block h-8 w-px bg-gray-700"></div>



          <div class="flex items-center gap-2">

            <div class="text-sm text-gray-300">

              Logado como: <span id="user-email" class="text-white font-semibold">--</span>

            </div>

            <button id="btn-logout" class="px-4 py-2 rounded-lg bg-[#7f1d1d] hover:bg-[#991b1b] text-white text-sm font-semibold">

              Sair

            </button>

          </div>

        </div>

      </div>

    </header>



    <!-- CONTEÚDO -->

    <div class="p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto">

      <div class="mb-6">

        <h1 class="text-3xl sm:text-4xl font-extrabold text-white">SISTEMA DE GESTÃO BRABO v5.0</h1>

        <p class="text-sm text-gray-400 mt-1">

          Painel por unidade. Relatórios por período e base pronta para auditoria/IA.

        </p>

      </div>



      <nav class="flex flex-wrap gap-2 mb-6 no-print">

        <button data-tab="visaoGeral" class="tab-btn tab-active py-2 px-4 rounded-lg text-sm font-semibold">Visão Geral</button>

        <button data-tab="alunos" class="tab-btn tab-inactive py-2 px-4 rounded-lg text-sm font-semibold">Alunos</button>

        <button data-tab="funcionarios" class="tab-btn tab-inactive py-2 px-4 rounded-lg text-sm font-semibold">Funcionários</button>



        <!-- ✅ NOVO -->

        <button data-tab="prestadores" class="tab-btn tab-inactive py-2 px-4 rounded-lg text-sm font-semibold">Prestadores</button>



        <button data-tab="planos" class="tab-btn tab-inactive py-2 px-4 rounded-lg text-sm font-semibold">Planos</button>

        <button data-tab="lancamentos" class="tab-btn tab-inactive py-2 px-4 rounded-lg text-sm font-semibold">Lançamentos</button>



        <!-- ✅ NOVO -->

        <button data-tab="retiradas" class="tab-btn tab-inactive py-2 px-4 rounded-lg text-sm font-semibold">Retiradas</button>



        <button data-tab="relatorios" class="tab-btn tab-inactive py-2 px-4 rounded-lg text-sm font-semibold">Relatórios</button>

      </nav>



      <main>



        <!-- VISÃO GERAL -->

        <section id="tab-visaoGeral" class="tab-content">

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">

            <div class="bg-[#2d3748] p-4 rounded-xl shadow">

              <div class="text-sm text-gray-300 mb-1">Receita Bruta (mês)</div>

              <div id="kpi-receita" class="text-3xl font-bold">R$ 0,00</div>

            </div>

            <div class="bg-[#2d3748] p-4 rounded-xl shadow">

              <div class="text-sm text-gray-300 mb-1">Custo Total (mês)</div>

              <div id="kpi-custo" class="text-3xl font-bold">R$ 0,00</div>

            </div>

            <div class="bg-[#2d3748] p-4 rounded-xl shadow">

              <div class="text-sm text-gray-300 mb-1">Saldo (mês)</div>

              <div id="kpi-saldo" class="text-3xl font-bold">R$ 0,00</div>

            </div>

          </div>



          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <div class="bg-[#2d3748] p-4 rounded-xl shadow lg:col-span-2">

              <h3 class="text-lg font-bold mb-3">Receita vs. Despesas (Mês Atual)</h3>

              <canvas id="chart-receita-despesa"></canvas>

            </div>

            <div class="bg-[#2d3748] p-4 rounded-xl shadow">

              <h3 class="text-lg font-bold mb-3">Top 5 Despesas (Mês Atual)</h3>

              <canvas id="chart-despesas-top"></canvas>

            </div>

          </div>

        </section>



        <!-- ALUNOS -->

        <section id="tab-alunos" class="tab-content hidden">

          <div class="bg-[#2d3748] p-4 rounded-xl shadow mb-4 flex justify-between items-center">

            <h3 class="text-lg font-bold">Alunos</h3>

            <button id="btn-add-aluno" class="bg-[#4299e1] hover:bg-[#3182ce] text-white font-semibold py-2 px-4 rounded-lg text-sm">

              Novo Aluno

            </button>

          </div>



          <div class="bg-[#2d3748] p-4 rounded-xl shadow overflow-x-auto">

            <table class="w-full text-left text-sm">

              <thead>

                <tr class="border-b border-gray-600">

                  <th class="p-2">Nome</th>

                  <th class="p-2">Email</th>

                  <th class="p-2">Status</th>

                  <th class="p-2">Desde</th>

                  <th class="p-2">Criado por</th>

                  <th class="p-2 text-right">Ações</th>

                </tr>

              </thead>

              <tbody id="table-alunos"></tbody>

            </table>

          </div>

        </section>



        <!-- FUNCIONÁRIOS -->

        <section id="tab-funcionarios" class="tab-content hidden">

          <div class="bg-[#2d3748] p-4 rounded-xl shadow mb-4 flex justify-between items-center">

            <h3 class="text-lg font-bold">Funcionários</h3>

            <button id="btn-add-funcionario" class="bg-[#4299e1] hover:bg-[#3182ce] text-white font-semibold py-2 px-4 rounded-lg text-sm">

              Novo Funcionário

            </button>

          </div>



          <div class="bg-[#2d3748] p-4 rounded-xl shadow overflow-x-auto">

            <table class="w-full text-left text-sm">

              <thead>

                <tr class="border-b border-gray-600">

                  <th class="p-2">Nome</th>

                  <th class="p-2">Cargo</th>

                  <th class="p-2">Desde</th>

                  <th class="p-2 text-right">Salário</th>

                  <th class="p-2">Criado por</th>

                  <th class="p-2 text-right">Ações</th>

                </tr>

              </thead>

              <tbody id="table-funcionarios"></tbody>

            </table>

          </div>



          <p class="text-xs text-gray-400 mt-3">

            “Salário” aqui é por unidade selecionada (base + adicional desta unidade).

          </p>

        </section>



        <!-- ✅ PRESTADORES -->

        <section id="tab-prestadores" class="tab-content hidden">

          <div class="bg-[#2d3748] p-4 rounded-xl shadow mb-4 flex justify-between items-center">

            <div>

              <h3 class="text-lg font-bold">Prestadores de Serviço</h3>

              <p class="text-xs text-gray-400">

                Separe CLT (Funcionários) de Prestadores (Fixo/Temporário). Pode anexar foto/documentos para histórico.

              </p>

            </div>

            <button id="btn-add-prestador" class="bg-[#4299e1] hover:bg-[#3182ce] text-white font-semibold py-2 px-4 rounded-lg text-sm">

              Novo Prestador

            </button>

          </div>



          <div class="bg-[#2d3748] p-4 rounded-xl shadow overflow-x-auto">

            <table class="w-full text-left text-sm">

              <thead>

                <tr class="border-b border-gray-600">

                  <th class="p-2">Nome</th>

                  <th class="p-2">Tipo</th>

                  <th class="p-2">Serviço</th>

                  <th class="p-2">Período</th>

                  <th class="p-2 text-right">Valor</th>

                  <th class="p-2">Criado por</th>

                  <th class="p-2 text-right">Ações</th>

                </tr>

              </thead>

              <tbody id="table-prestadores"></tbody>

            </table>

          </div>

        </section>



        <!-- PLANOS -->

        <section id="tab-planos" class="tab-content hidden">

          <div class="bg-[#2d3748] p-4 rounded-xl shadow mb-4 flex justify-between items-center">

            <h3 class="text-lg font-bold">Planos</h3>

            <button id="btn-add-plano" class="bg-[#4299e1] hover:bg-[#3182ce] text-white font-semibold py-2 px-4 rounded-lg text-sm">

              Novo Plano

            </button>

          </div>



          <div class="bg-[#2d3748] p-4 rounded-xl shadow overflow-x-auto">

            <table class="w-full text-left text-sm">

              <thead>

                <tr class="border-b border-gray-600">

                  <th class="p-2">Nome</th>

                  <th class="p-2">Tipo</th>

                  <th class="p-2 text-right">Valor</th>

                  <th class="p-2">Status</th>

                  <th class="p-2">Criado por</th>

                  <th class="p-2 text-right">Ações</th>

                </tr>

              </thead>

              <tbody id="table-planos"></tbody>

            </table>

          </div>



          <p class="text-xs text-gray-400 mt-3">

            Inclui Mensal/Trimestral/Anual e “Zanco Total”. Se quiser “Natação” e “Lutas”, crie planos específicos (ex.: “Mensal Natação”, “Mensal Lutas”).

          </p>

        </section>



        <!-- LANÇAMENTOS -->

        <section id="tab-lancamentos" class="tab-content hidden">

          <div class="bg-[#2d3748] p-4 rounded-xl shadow mb-4 flex justify-between items-center">

            <div>

              <h3 class="text-lg font-bold">Lançamentos</h3>

              <p class="text-xs text-gray-400">

                Receitas/Despesas da unidade. Despesas podem ser CLT (Folha) ou Prestadores (Serviços).

              </p>

            </div>

            <button id="btn-add-lancamento" class="bg-[#4299e1] hover:bg-[#3182ce] text-white font-semibold py-2 px-4 rounded-lg text-sm">

              Novo Lançamento

            </button>

          </div>



          <div class="bg-[#2d3748] p-4 rounded-xl shadow overflow-x-auto">

            <table class="w-full text-left text-sm">

              <thead>

                <tr class="border-b border-gray-600">

                  <th class="p-2">Descrição</th>

                  <th class="p-2">Categoria</th>

                  <th class="p-2">Tipo</th>

                  <th class="p-2 text-right">Valor</th>

                  <th class="p-2">Vencimento</th>

                  <th class="p-2">Criado por</th>

                  <th class="p-2 text-right">Ações</th>

                </tr>

              </thead>

              <tbody id="table-lancamentos"></tbody>

            </table>

          </div>



          <p class="text-xs text-gray-400 mt-3">

            Sugestões: Luz, Água, Internet, Impostos, Folha, Aluguel, Marketing, Manutenção, <b>Prestadores de Serviço</b>, Parceiros (TotalPass/Gympass), Produtos/Loja…

          </p>

        </section>



        <!-- ✅ RETIRADAS -->

        <section id="tab-retiradas" class="tab-content hidden">

          <div class="bg-[#2d3748] p-4 rounded-xl shadow mb-4 flex justify-between items-center">

            <div>

              <h3 class="text-lg font-bold">Retirada de Sócios</h3>

              <p class="text-xs text-gray-400">

                Sai do saldo/caixa, mas <b>não</b> entra como despesa operacional. Registre nome/data/valor e (opcional) comprovante.

              </p>

            </div>

            <button id="btn-add-retirada" class="bg-[#4299e1] hover:bg-[#3182ce] text-white font-semibold py-2 px-4 rounded-lg text-sm">

              Nova Retirada

            </button>

          </div>



          <div class="bg-[#2d3748] p-4 rounded-xl shadow overflow-x-auto">

            <table class="w-full text-left text-sm">

              <thead>

                <tr class="border-b border-gray-600">

                  <th class="p-2">Sócio</th>

                  <th class="p-2">Data</th>

                  <th class="p-2">Descrição</th>

                  <th class="p-2 text-right">Valor</th>

                  <th class="p-2">Criado por</th>

                  <th class="p-2 text-right">Ações</th>

                </tr>

              </thead>

              <tbody id="table-retiradas"></tbody>

            </table>

          </div>

        </section>



        <!-- RELATÓRIOS -->

        <section id="tab-relatorios" class="tab-content hidden">

          <div class="bg-[#2d3748] p-4 rounded-xl shadow mb-4">

            <div class="flex flex-wrap items-end justify-between gap-3">

              <div>

                <h3 class="text-lg font-bold">Relatórios por período</h3>

                <p class="text-xs text-gray-400">

                  Tudo já é filtrado pela unidade selecionada. Escolha o tipo: Financeiro / Alunos / Completo.

                </p>

              </div>



              <div class="flex flex-wrap items-end gap-3 no-print">

                <div>

                  <label class="text-xs text-gray-300">Tipo</label>

                  <select id="rel-tipo" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white text-sm">

                    <option value="COMPLETO">Completo (Financeiro + Alunos)</option>

                    <option value="FINANCEIRO">Somente Financeiro</option>

                    <option value="ALUNOS">Somente Alunos</option>

                  </select>

                </div>



                <div>

                  <label class="text-xs text-gray-300">De</label>

                  <input id="rel-from" type="date" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white text-sm" />

                </div>



                <div>

                  <label class="text-xs text-gray-300">Até</label>

                  <input id="rel-to" type="date" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white text-sm" />

                </div>



                <div class="flex items-center gap-2">

                  <input id="rel-incluir-retiradas" type="checkbox" class="w-4 h-4" checked />

                  <label for="rel-incluir-retiradas" class="text-xs text-gray-300">Incluir retiradas</label>

                </div>



                <button id="btn-rel-gerar" class="px-4 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold">

                  Gerar

                </button>

                <button id="btn-rel-imprimir" class="px-4 py-2 rounded-lg bg-[#22c55e] hover:bg-[#16a34a] text-white text-sm font-semibold">

                  Imprimir

                </button>

              </div>

            </div>

          </div>



          <!-- KPIs do período (financeiro) -->

          <div id="rel-box-kpis" class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <div class="bg-[#2d3748] p-4 rounded-xl shadow">

              <div class="text-sm text-gray-300 mb-1">Receita (período)</div>

              <div id="rel-receita" class="text-2xl font-bold">R$ 0,00</div>

            </div>

            <div class="bg-[#2d3748] p-4 rounded-xl shadow">

              <div class="text-sm text-gray-300 mb-1">Despesas (período)</div>

              <div id="rel-custo" class="text-2xl font-bold">R$ 0,00</div>

            </div>

            <div class="bg-[#2d3748] p-4 rounded-xl shadow">

              <div class="text-sm text-gray-300 mb-1">Saldo (período)</div>

              <div id="rel-saldo" class="text-2xl font-bold">R$ 0,00</div>

            </div>

          </div>



          <!-- Financeiro -->

          <div id="rel-box-fin" class="mt-6 bg-[#2d3748] p-4 rounded-xl shadow overflow-x-auto">

            <div class="flex items-center justify-between gap-3 mb-3">

              <h4 class="font-bold">Financeiro no período</h4>

              <div class="text-xs text-gray-400" id="rel-info"></div>

            </div>

            <table class="w-full text-left text-sm">

              <thead>

                <tr class="border-b border-gray-600">

                  <th class="p-2">Data</th>

                  <th class="p-2">Tipo</th>

                  <th class="p-2">Categoria</th>

                  <th class="p-2">Descrição</th>

                  <th class="p-2 text-right">Valor</th>

                </tr>

              </thead>

              <tbody id="rel-table-fin"></tbody>

            </table>

          </div>



          <!-- Alunos -->

          <div id="rel-box-alunos" class="mt-6 bg-[#2d3748] p-4 rounded-xl shadow overflow-x-auto">

            <div class="flex items-center justify-between gap-3 mb-3">

              <h4 class="font-bold">Alunos no período</h4>

              <div class="text-xs text-gray-400" id="rel-alunos-info"></div>

            </div>

            <table class="w-full text-left text-sm">

              <thead>

                <tr class="border-b border-gray-600">

                  <th class="p-2">Nome</th>

                  <th class="p-2">Status</th>

                  <th class="p-2">Desde</th>

                  <th class="p-2">Plano</th>

                </tr>

              </thead>

              <tbody id="rel-table-alunos"></tbody>

            </table>

          </div>

        </section>



      </main>

    </div>

  </div>



  <!-- DATALISTS -->

  <datalist id="datalist-planos"></datalist>

  <datalist id="datalist-prestadores"></datalist>

  <datalist id="datalist-socios"></datalist>



  <!-- ========================= MODAL ALUNO ========================= -->

  <div id="modal-aluno" class="fixed inset-0 hidden z-50 items-center justify-center p-4 bg-black/60">

    <div class="w-full max-w-5xl bg-[#0f172a] border border-gray-700 rounded-2xl shadow-2xl flex flex-col max-h-[calc(100vh-2rem)]">

      <div class="flex items-center justify-between gap-3 p-4 border-b border-gray-700">

        <div>

          <h3 id="modal-aluno-title" class="text-lg font-bold text-white">Novo Aluno</h3>

          <p class="text-xs text-gray-400">Salvo na unidade selecionada. (Se plano existir, gera receita automática.)</p>

        </div>

        <button id="btn-close-modal-aluno" class="px-3 py-2 rounded-lg bg-[#1f2937] hover:bg-[#334155] text-sm">Fechar</button>

      </div>



      <div class="p-4 flex-1 overflow-y-auto">

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-4">

          <div class="lg:col-span-3">

            <div class="bg-[#111827] border border-gray-700 rounded-xl p-3">

              <div class="text-sm font-semibold mb-2">Foto (3x4)</div>



              <div class="w-full aspect-[3/4] bg-[#0b1220] border border-gray-700 rounded-xl overflow-hidden flex items-center justify-center">

                <img id="aluno-foto-preview" alt="Foto 3x4" class="w-full h-full object-cover hidden" />

                <div id="aluno-foto-placeholder" class="text-xs text-gray-400 px-3 text-center">Sem foto. Use “Tirar” ou “Anexar”.</div>

              </div>



              <div class="mt-3 flex flex-wrap gap-2">

                <button id="btn-foto-tirar" class="px-3 py-2 rounded-lg bg-[#2563eb] hover:bg-[#1d4ed8] text-white text-sm font-semibold">Tirar</button>

                <button id="btn-foto-anexar" class="px-3 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold">Anexar</button>

                <button id="btn-foto-remover" class="px-3 py-2 rounded-lg bg-[#7f1d1d] hover:bg-[#991b1b] text-white text-sm font-semibold">Remover</button>

              </div>



              <p class="mt-2 text-[11px] text-gray-400">Corte central (3:4).</p>



              <input id="input-foto-camera" type="file" accept="image/*" capture="user" class="hidden" />

              <input id="input-foto-file" type="file" accept="image/*" class="hidden" />

            </div>

          </div>



          <div class="lg:col-span-9">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

              <div>

                <label class="text-sm text-gray-300">Nome completo *</label>

                <input id="aluno-nome" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Nome do aluno" />

              </div>

              <div>

                <label class="text-sm text-gray-300">Nascimento</label>

                <input id="aluno-nascimento" type="date" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" />

              </div>

              <div>

                <label class="text-sm text-gray-300">CPF</label>

                <input id="aluno-cpf" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="CPF" />

              </div>

              <div>

                <label class="text-sm text-gray-300">E-mail</label>

                <input id="aluno-email" type="email" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="email@dominio.com" />

              </div>

              <div>

                <label class="text-sm text-gray-300">Telefone principal</label>

                <input id="aluno-tel1" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="(21) 99999-9999" />

              </div>

              <div>

                <label class="text-sm text-gray-300">Telefone secundário</label>

                <input id="aluno-tel2" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="(21) 99999-9999" />

              </div>

              <div class="md:col-span-2">

                <label class="text-sm text-gray-300">Endereço</label>

                <input id="aluno-endereco" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Rua, número, bairro, cidade" />

              </div>

              <div>

                <label class="text-sm text-gray-300">Status</label>

                <select id="aluno-status" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white">

                  <option value="Ativo">Ativo</option>

                  <option value="Trancado">Trancado</option>

                  <option value="Cancelado">Cancelado</option>

                </select>

              </div>

              <div>

                <label class="text-sm text-gray-300">Desde quando é aluno</label>

                <input id="aluno-desde" type="date" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" />

                <p class="mt-1 text-[11px] text-gray-400">Se vazio, usa a data de criação.</p>

              </div>

            </div>



            <div class="mt-4 bg-[#111827] border border-gray-700 rounded-xl p-3">

              <div class="text-sm font-semibold">Plano</div>

              <div class="text-[11px] text-gray-400">Plano atual + histórico.</div>



              <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-3">

                <div>

                  <label class="text-sm text-gray-300">Plano atual</label>

                  <input id="plano-atual-nome" list="datalist-planos" class="mt-1 w-full bg-[#0b1220] border border-gray-700 rounded-lg p-2 text-white" placeholder="Ex: Mensal, Trimestral..." />

                </div>

                <div>

                  <label class="text-sm text-gray-300">Início</label>

                  <input id="plano-atual-inicio" type="date" class="mt-1 w-full bg-[#0b1220] border border-gray-700 rounded-lg p-2 text-white" />

                </div>

                <div>

                  <label class="text-sm text-gray-300">Fim</label>

                  <input id="plano-atual-fim" type="date" class="mt-1 w-full bg-[#0b1220] border border-gray-700 rounded-lg p-2 text-white" />

                </div>

              </div>



              <div class="mt-4 flex items-center justify-between">

                <div class="text-sm font-semibold">Histórico de planos</div>

                <button id="btn-add-hist" class="px-3 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold">+ Adicionar</button>

              </div>



              <div id="hist-container" class="mt-3 space-y-2"></div>

            </div>



            <div class="mt-4 bg-[#111827] border border-gray-700 rounded-xl p-3">

              <div class="flex items-center justify-between gap-3">

                <div>

                  <div class="text-sm font-semibold">Documento (foto)</div>

                  <div class="text-[11px] text-gray-400">Identidade/comprovante.</div>

                </div>

                <div class="flex flex-wrap gap-2">

                  <button id="btn-doc-tirar" class="px-3 py-2 rounded-lg bg-[#2563eb] hover:bg-[#1d4ed8] text-white text-sm font-semibold">Tirar</button>

                  <button id="btn-doc-anexar" class="px-3 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold">Anexar</button>

                  <button id="btn-doc-remover" class="px-3 py-2 rounded-lg bg-[#7f1d1d] hover:bg-[#991b1b] text-white text-sm font-semibold">Remover</button>

                </div>

              </div>



              <div class="mt-3 flex items-start gap-3">

                <div class="w-28 h-28 bg-[#0b1220] border border-gray-700 rounded-xl overflow-hidden flex items-center justify-center">

                  <img id="aluno-doc-preview" alt="Documento" class="w-full h-full object-cover hidden" />

                  <div id="aluno-doc-placeholder" class="text-[11px] text-gray-400 px-2 text-center">Sem documento</div>

                </div>

                <div class="text-xs text-gray-300">

                  <div id="doc-info" class="text-gray-400">Nenhum documento anexado.</div>

                  <button id="btn-doc-abrir" class="mt-2 px-3 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold hidden">Abrir</button>

                </div>



                <input id="input-doc-camera" type="file" accept="image/*" capture="environment" class="hidden" />

                <input id="input-doc-file" type="file" accept="image/*" class="hidden" />

              </div>

            </div>



            <p id="modal-aluno-error" class="mt-3 text-sm text-red-300 hidden"></p>

          </div>

        </div>

      </div>



      <div class="flex items-center justify-between gap-2 p-4 border-t border-gray-700 bg-[#0b1220] rounded-b-2xl">

        <button id="btn-print-aluno" class="px-4 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold">Imprimir ficha</button>

        <div class="flex items-center gap-2">

          <button id="btn-cancel-modal-aluno" class="px-4 py-2 rounded-lg bg-[#1f2937] hover:bg-[#334155] text-sm">Cancelar</button>

          <button id="btn-save-aluno" class="px-4 py-2 rounded-lg bg-[#22c55e] hover:bg-[#16a34a] text-white text-sm font-semibold">Salvar</button>

        </div>

      </div>

    </div>

  </div>



  <!-- ========================= MODAL FUNCIONÁRIO ========================= -->

  <div id="modal-func" class="fixed inset-0 hidden z-50 items-center justify-center p-4 bg-black/60">

    <div class="w-full max-w-5xl bg-[#0f172a] border border-gray-700 rounded-2xl shadow-2xl flex flex-col max-h-[calc(100vh-2rem)]">

      <div class="flex items-center justify-between gap-3 p-4 border-b border-gray-700">

        <div>

          <h3 id="modal-func-title" class="text-lg font-bold text-white">Novo Funcionário</h3>

          <p class="text-xs text-gray-400">Salvo na unidade selecionada. (Gera despesa automática do salário.)</p>

        </div>

        <button id="btn-close-modal-func" class="px-3 py-2 rounded-lg bg-[#1f2937] hover:bg-[#334155] text-sm">Fechar</button>

      </div>



      <div class="p-4 flex-1 overflow-y-auto">

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-4">

          <div class="lg:col-span-3">

            <div class="bg-[#111827] border border-gray-700 rounded-xl p-3">

              <div class="text-sm font-semibold mb-2">Foto (3x4)</div>



              <div class="w-full aspect-[3/4] bg-[#0b1220] border border-gray-700 rounded-xl overflow-hidden flex items-center justify-center">

                <img id="func-foto-preview" alt="Foto 3x4" class="w-full h-full object-cover hidden" />

                <div id="func-foto-placeholder" class="text-xs text-gray-400 px-3 text-center">Sem foto. Use “Tirar” ou “Anexar”.</div>

              </div>



              <div class="mt-3 flex flex-wrap gap-2">

                <button id="btn-func-foto-tirar" class="px-3 py-2 rounded-lg bg-[#2563eb] hover:bg-[#1d4ed8] text-white text-sm font-semibold">Tirar</button>

                <button id="btn-func-foto-anexar" class="px-3 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold">Anexar</button>

                <button id="btn-func-foto-remover" class="px-3 py-2 rounded-lg bg-[#7f1d1d] hover:bg-[#991b1b] text-white text-sm font-semibold">Remover</button>

              </div>



              <p class="mt-2 text-[11px] text-gray-400">Corte central (3:4).</p>



              <input id="input-func-foto-camera" type="file" accept="image/*" capture="user" class="hidden" />

              <input id="input-func-foto-file" type="file" accept="image/*" class="hidden" />

            </div>

          </div>



          <div class="lg:col-span-9">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

              <div>

                <label class="text-sm text-gray-300">Nome *</label>

                <input id="func-nome" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Nome do funcionário" />

              </div>



              <div>

                <label class="text-sm text-gray-300">Cargo *</label>

                <input id="func-cargo" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Ex: Recepção, Professor..." />

              </div>



              <div>

                <label class="text-sm text-gray-300">Data de contratação</label>

                <input id="func-contratado" type="date" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" />

                <p class="mt-1 text-[11px] text-gray-400">Se vazio, usa a data de criação.</p>

              </div>



              <div>

                <label class="text-sm text-gray-300">CPF</label>

                <input id="func-cpf" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="CPF" />

              </div>



              <div>

                <label class="text-sm text-gray-300">E-mail</label>

                <input id="func-email" type="email" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="email@dominio.com" />

              </div>



              <div>

                <label class="text-sm text-gray-300">Telefone</label>

                <input id="func-tel1" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="(21) 99999-9999" />

              </div>



              <div class="md:col-span-2">

                <label class="text-sm text-gray-300">Endereço</label>

                <input id="func-endereco" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Rua, número, bairro, cidade" />

              </div>



              <div>

                <label class="text-sm text-gray-300">Status</label>

                <select id="func-status" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white">

                  <option value="Ativo">Ativo</option>

                  <option value="Afastado">Afastado</option>

                  <option value="Desligado">Desligado</option>

                </select>

              </div>



              <div>

                <label class="text-sm text-gray-300">Salário base (R$)</label>

                <input id="func-salario-base" type="number" step="0.01" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Ex: 1412" />

              </div>



              <div>

                <label class="text-sm text-gray-300">Adicional desta unidade (R$)</label>

                <input id="func-adicional" type="number" step="0.01" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Ex: 150" />

              </div>



              <div>

                <label class="text-sm text-gray-300">Salário total</label>

                <input id="func-salario-total" disabled class="mt-1 w-full bg-[#0b1220] border border-gray-700 rounded-lg p-2 text-white" />

              </div>



              <div class="md:col-span-2">

                <label class="text-sm text-gray-300">Observações</label>

                <input id="func-obs" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Ex: escala, restrições, etc." />

              </div>

            </div>



            <div class="mt-4 bg-[#111827] border border-gray-700 rounded-xl p-3">

              <div class="flex items-center justify-between gap-3">

                <div>

                  <div class="text-sm font-semibold">Documento (foto)</div>

                  <div class="text-[11px] text-gray-400">Ex: atestado médico, documentos.</div>

                </div>

                <div class="flex flex-wrap gap-2">

                  <button id="btn-func-doc-tirar" class="px-3 py-2 rounded-lg bg-[#2563eb] hover:bg-[#1d4ed8] text-white text-sm font-semibold">Tirar</button>

                  <button id="btn-func-doc-anexar" class="px-3 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold">Anexar</button>

                  <button id="btn-func-doc-remover" class="px-3 py-2 rounded-lg bg-[#7f1d1d] hover:bg-[#991b1b] text-white text-sm font-semibold">Remover</button>

                </div>

              </div>



              <div class="mt-3 flex items-start gap-3">

                <div class="w-28 h-28 bg-[#0b1220] border border-gray-700 rounded-xl overflow-hidden flex items-center justify-center">

                  <img id="func-doc-preview" alt="Documento" class="w-full h-full object-cover hidden" />

                  <div id="func-doc-placeholder" class="text-[11px] text-gray-400 px-2 text-center">Sem documento</div>

                </div>

                <div class="text-xs text-gray-300">

                  <div id="func-doc-info" class="text-gray-400">Nenhum documento anexado.</div>

                  <button id="btn-func-doc-abrir" class="mt-2 px-3 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold hidden">Abrir</button>

                </div>



                <input id="input-func-doc-camera" type="file" accept="image/*" capture="environment" class="hidden" />

                <input id="input-func-doc-file" type="file" accept="image/*" class="hidden" />

              </div>

            </div>



            <p id="modal-func-error" class="mt-3 text-sm text-red-300 hidden"></p>

          </div>

        </div>

      </div>



      <div class="flex items-center justify-between gap-2 p-4 border-t border-gray-700 bg-[#0b1220] rounded-b-2xl">

        <button id="btn-print-func" class="px-4 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold">Imprimir ficha</button>

        <div class="flex items-center gap-2">

          <button id="btn-cancel-modal-func" class="px-4 py-2 rounded-lg bg-[#1f2937] hover:bg-[#334155] text-sm">Cancelar</button>

          <button id="btn-save-func" class="px-4 py-2 rounded-lg bg-[#22c55e] hover:bg-[#16a34a] text-white text-sm font-semibold">Salvar</button>

        </div>

      </div>

    </div>

  </div>



  <!-- ========================= MODAL PRESTADOR ========================= -->

  <div id="modal-prest" class="fixed inset-0 hidden z-50 items-center justify-center p-4 bg-black/60">

    <div class="w-full max-w-5xl bg-[#0f172a] border border-gray-700 rounded-2xl shadow-2xl flex flex-col max-h-[calc(100vh-2rem)]">

      <div class="flex items-center justify-between gap-3 p-4 border-b border-gray-700">

        <div>

          <h3 id="modal-prest-title" class="text-lg font-bold text-white">Novo Prestador</h3>

          <p class="text-xs text-gray-400">Fixo (contrato) ou Temporário (período). Pode salvar foto/documento.</p>

        </div>

        <button id="btn-close-modal-prest" class="px-3 py-2 rounded-lg bg-[#1f2937] hover:bg-[#334155] text-sm">Fechar</button>

      </div>



      <div class="p-4 flex-1 overflow-y-auto">

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-4">

          <div class="lg:col-span-3">

            <div class="bg-[#111827] border border-gray-700 rounded-xl p-3">

              <div class="text-sm font-semibold mb-2">Foto (3x4)</div>



              <div class="w-full aspect-[3/4] bg-[#0b1220] border border-gray-700 rounded-xl overflow-hidden flex items-center justify-center">

                <img id="prest-foto-preview" alt="Foto 3x4" class="w-full h-full object-cover hidden" />

                <div id="prest-foto-placeholder" class="text-xs text-gray-400 px-3 text-center">Sem foto.</div>

              </div>



              <div class="mt-3 flex flex-wrap gap-2">

                <button id="btn-prest-foto-tirar" class="px-3 py-2 rounded-lg bg-[#2563eb] hover:bg-[#1d4ed8] text-white text-sm font-semibold">Tirar</button>

                <button id="btn-prest-foto-anexar" class="px-3 py-2 rounded-lg bg-[#334155] hover:bg-[#475569] text-white text-sm font-semibold">Anexar</button>

                <button id="btn-prest-foto-remover" class="px-3 py-2 rounded-lg bg-[#7f1d1d] hover:bg-[#991b1b] text-white text-sm font-semibold">Remover</button>

              </div>



              <input id="input-prest-foto-camera" type="file" accept="image/*" capture="user" class="hidden" />

              <input id="input-prest-foto-file" type="file" accept="image/*" class="hidden" />

            </div>

          </div>



          <div class="lg:col-span-9">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

              <div>

                <label class="text-sm text-gray-300">Nome *</label>

                <input id="prest-nome" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Nome do prestador" />

              </div>



              <div>

                <label class="text-sm text-gray-300">Tipo *</label>

                <select id="prest-tipo" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white">

                  <option value="FIXO">FIXO (Contrato)</option>

                  <option value="TEMPORARIO">TEMPORÁRIO (Período)</option>

                </select>

              </div>



              <div>

                <label class="text-sm text-gray-300">Serviço *</label>

                <input id="prest-servico" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Ex: Eletricista, Contador, Manutenção..." />

              </div>



              <div>

                <label class="text-sm text-gray-300">Contato</label>

                <input id="prest-contato" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Telefone / e-mail" />

              </div>



              <div>

                <label class="text-sm text-gray-300">Documento (CPF/CNPJ)</label>

                <input id="prest-doc" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="CPF ou CNPJ" />

              </div>



              <div>

                <label class="text-sm text-gray-300">Status</label>

                <select id="prest-status" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white">

                  <option value="ATIVO">Ativo</option>

                  <option value="INATIVO">Inativo</option>

                </select>

              </div>



              <div>

                <label class="text-sm text-gray-300">Início</label>

                <input id="prest-inicio" type="date" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" />

              </div>



              <div>

                <label class="text-sm text-gray-300">Fim (temporário)</label>

                <input id="prest-fim" type="date" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" />

              </div>



              <div>

                <label class="text-sm text-gray-300">Valor (R$)</label>

                <input id="prest-valor" type="number" step="0.01" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Opcional" />

              </div>



              <div class="md:col-span-2">

                <label class="text-sm text-gray-300">Observações</label>

                <input id="prest-obs" class="mt-1 w-full bg-[#111827] border border-gray-700 rounded-lg p-2 text-white" placeholder="Opcional" />

              </div>

            </div>



            <div class="mt-4 bg-[#111827] border border-gray-700 rounded-xl p-3">

              <div class="flex items-center justify-between gap-3">

                <div>

                  <div class="text-sm font-semibold">Documento (foto)</div>

                  <div class="text-[11px] text-gray-400">Contrato, recibo, identidade, etc.</div>

                </div>